<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>I AM HUMAN — Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{--bg:#000;--fg:#fff;--ntx:#7EE7FF;--logw:0px;--idw:0px;}

html,body{height:100%}
body{
  margin:0;background:#000;color:#fff;
  font-family:"Share Tech Mono","Courier New",monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;padding:24px;
}
/* Cinematic layout: slightly narrower & nudged right */
.wrap{
  width:min(88vw,760px);
  display:grid;gap:28px;
  justify-items:start;align-items:start;text-align:left;
  transform:translateX(4%);
}
pre{margin:0;max-width:64ch;font-size:clamp(14px,2.6vw,19px);line-height:1.6}

.cursor{display:inline-block;width:.65ch}
.blink{animation:blink .55s step-end infinite}
@keyframes blink{50%{opacity:0}}

/* tag + date */
.tag{color:var(--ntx);text-shadow:0 0 6px rgba(126,231,255,.9),0 0 14px rgba(126,231,255,.7)}
.date{
  color:#ff66cc; /* warmer magenta base */
  animation:pulseDate 3.8s ease-in-out infinite;
}

/* --- Animations --- */
@keyframes pulseUSB{
  0%,100%{filter:brightness(1) drop-shadow(0 0 6px rgba(255,255,255,.35))}
  40%{filter:brightness(1.9) drop-shadow(0 0 20px rgba(255,255,255,.95)) drop-shadow(0 0 36px rgba(178,102,255,.85))}
  60%{filter:brightness(1.5) drop-shadow(0 0 14px rgba(178,102,255,.65))}
}
/* brighter, longer log glow */
@keyframes pulseText{
  0%,100%{
    text-shadow:
      0 0 4px rgba(255,255,255,.45),
      0 0 8px rgba(255,255,255,.28),
      0 0 12px rgba(178,102,255,.25);
  }
  35%,65%{
    text-shadow:
      0 0 10px rgba(255,255,255,1),
      0 0 22px rgba(178,102,255,.98),
      0 0 34px rgba(255,102,204,.95),
      0 0 46px rgba(178,102,255,.88);
  }
}
/* brighter magenta-violet pulse for date */
@keyframes pulseDate{
  0%,100%{
    text-shadow:
      0 0 8px rgba(255,102,204,.6),
      0 0 18px rgba(178,102,255,.45),
      0 0 26px rgba(255,153,255,.35);
  }
  40%{
    text-shadow:
      0 0 12px rgba(255,102,204,1),
      0 0 28px rgba(178,102,255,1),
      0 0 44px rgba(255,153,255,.95),
      0 0 64px rgba(255,102,204,.85);
  }
  60%{
    text-shadow:
      0 0 10px rgba(255,102,204,.95),
      0 0 24px rgba(178,102,255,.9),
      0 0 36px rgba(255,153,255,.85);
  }
}

/* --- Layout for log & id lines (wrapping-safe) --- */
.logline,.idline{position:relative;max-width:64ch;min-height:1.6em}
.logline .prefix,.idline .prefix{position:absolute;left:0;top:0;white-space:pre;}
.logline .content{
  display:inline;white-space:pre-wrap;overflow-wrap:break-word;
  margin-left:var(--logw);vertical-align:top;
  will-change:text-shadow;animation:pulseText 3.8s ease-in-out infinite;
}
.idline .content{
  display:inline;white-space:pre-wrap;overflow-wrap:break-word;
  margin-left:var(--idw);vertical-align:top;
  will-change:text-shadow; /* (no pulse needed, but safe for future) */
}
.logline .cur,.idline .cur{display:inline}

/* USB */
.usb{
  position:relative;width:min(75vw,520px);aspect-ratio:16/9;
  opacity:0;transition:opacity 2.5s ease-in;
  transform:translateX(-3%) translateY(-8%);
  margin-top:-14px;
  animation:pulseUSB 3.8s ease-in-out infinite paused;
}
.usb.visible{opacity:0.9;animation-play-state:running;}
.usb img{width:100%;height:100%;object-fit:contain;display:block}

@media (prefers-reduced-motion:reduce){
  .blink,.date,.logline .content,.usb{animation:none!important;text-shadow:none!important}
}
</style>
</head>

<body>
<div class="wrap">
  <pre id="out"></pre>
  <div id="usb" class="usb"><img src="usb.png" alt="recovered usb"></div>
</div>

<script>
/* ---------- CONTENT POOLS ---------- */
const ENDING = "#next_transmission : march 2026";

const LOGS = [
  "> log    : sub-bass residue detected",
  "> log    : faint harmonic pulse detected",
  "> log    : residual loop fragment detected",
  "> log    : rhythmic ghost pattern detected",
  "> log    : low-frequency hum detected",
  "> log    : sub-harmonic trace detected",
  "> log    : quiet loop fragment detected",
  "> log    : unfinished sequence detected",
  "> log    : harmonic pulse detected — energy rising"
];

const IDS = [
  "> id     : human // made",
  "> id     : human // raw",
  "> id     : human // organic",
  "> id     : human // analog",
  "> id     : human // magnetic",
  "> id     : human // imperfect",
  "> id     : human // authentic",
  "> id     : human // feeling"
];

const STATUS = [
  "> status : Δ-lost sp//ark",
  "> status : Δ-wavecatcher",
  "> status : Δ-decoder"
];

/* ---------- TIMING / PACE ---------- */
const SPEED_BASE=30, SPEED_END=40, JITTER=5, STUTTER_PROB=0.1, STUTTER_MAX=120;
const SEARCH_PAUSE=1200, BREATH=200;

const out=document.getElementById("out"), usb=document.getElementById("usb");
const rnd=(a,b)=>Math.random()*(b-a)+a, wait=ms=>new Promise(r=>setTimeout(r,ms));

/* ---------- MEASURE PREFIXES FOR WRAP ---------- */
function setPrefixWidth(prefixText, cssVarName){
  const probe=document.createElement("span");
  probe.textContent=prefixText;
  probe.style.position="absolute";probe.style.visibility="hidden";probe.style.whiteSpace="pre";
  probe.style.fontFamily=getComputedStyle(out).fontFamily;
  probe.style.fontSize=getComputedStyle(out).fontSize;
  document.body.appendChild(probe);
  const w=probe.getBoundingClientRect().width;
  document.body.removeChild(probe);
  document.documentElement.style.setProperty(cssVarName, w+"px");
}

/* ---------- TYPE HELPERS ---------- */
async function typeSimpleLine(text, speed=SPEED_BASE){
  const line=document.createElement("div");
  const span=document.createElement("span");
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";
  line.appendChild(span); line.appendChild(cur); out.appendChild(line);
  for(let i=0;i<text.length;i++){
    span.innerHTML=text.slice(0,i+1)
      .replace(/^\s*#next_transmission\s*:/i,'<span class="tag">#next_transmission</span> :')
      .replace(/march 2026/gi,'<span class="date">march 2026</span>');
    await wait(Math.floor(rnd(speed-JITTER,speed+JITTER)));
  }
  await wait(BREATH);
}

async function typePrefixedLine(fullText, kind="log"){ // kind: "log" | "id"
  const row=document.createElement("div"); row.className=kind==="log"?"logline":"idline";
  const prefix=document.createElement("span"); prefix.className="prefix";
  const content=document.createElement("span"); content.className="content";
  const cur=document.createElement("span"); cur.className="cur cursor blink"; cur.textContent="▮";
  // split into prefix + content
  const match = fullText.match(/^(\>\s+[a-z]+(\s+)?\:)(.*)$/i);
  const pText = match ? match[1]+" " : (kind==="log"?"> log : ":"> id  : ");
  const cText = match ? match[3].trimStart() : fullText;

  prefix.textContent=pText;
  row.appendChild(prefix); row.appendChild(content); row.appendChild(cur); out.appendChild(row);

  // typing with a deliberate mid-pause on log
  const halfway=Math.floor(cText.length/2); let paused=false;
  for(let i=0;i<cText.length;i++){
    content.textContent=cText.slice(0,i+1);
    let d=Math.floor(rnd(SPEED_BASE-JITTER,SPEED_BASE+JITTER));
    if(kind==="log"){
      if(Math.random()<STUTTER_PROB) d+=Math.floor(rnd(30,STUTTER_MAX));
      const ch=cText[i];
      if(ch===','||ch==='—') d+=Math.floor(rnd(80,180));
      if(!paused && i>=halfway){ d+=900; paused=true; }
    }
    await wait(d);
  }
  await wait(BREATH);
  if(kind==="log") lastLogContent=content;
}

let lastLogContent=null;

/* ---------- RUN ---------- */
(async function run(){
  // measure prefix widths so wrapping aligns perfectly
  setPrefixWidth("> log : ", "--logw");
  setPrefixWidth("> id  : ", "--idw");

  // choose one at random from each pool
  const logLine   = LOGS[Math.floor(Math.random()*LOGS.length)];
  const idLine    = IDS[Math.floor(Math.random()*IDS.length)];
  const status    = STATUS[Math.floor(Math.random()*STATUS.length)];

  // sequence
  await typeSimpleLine("> searching static…");
  await wait(SEARCH_PAUSE);
  await typePrefixedLine(logLine, "log");
  await typePrefixedLine(idLine, "id");
  await typeSimpleLine(status);
  await typeSimpleLine(ENDING, SPEED_END); // slower, suspense

  // USB fade & sync
  setTimeout(()=>{
    usb.classList.add("visible");
    if(lastLogContent){
      lastLogContent.style.animation="none";
      void lastLogContent.offsetWidth; // reset
      lastLogContent.style.animation="pulseText 3.8s ease-in-out infinite";
    }
  },500);
})();
</script>
</body>
</html>
