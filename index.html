<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>I AM HUMAN — Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{--bg:#000;--fg:#fff;--ntx:#7EE7FF;--logw:0px;--idw:0px;}

html,body{height:100%}
body{
  margin:0;background:#000;color:#fff;
  font-family:"Share Tech Mono","Courier New",monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;padding:24px;
}
/* Cinematic layout: slightly narrower & nudged right */
.wrap {
  width:min(88vw,760px);
  display:grid;
  gap:28px;
  justify-items:start;
  align-items:start;
  text-align:left;
  padding-left:7.5vw; /* <-- add this */
}
pre{margin:0;max-width:64ch;font-size:clamp(14px,2.6vw,19px);line-height:1.6}

.cursor{display:inline-block;width:.65ch}
.blink{animation:blink .55s step-end infinite}
@keyframes blink{50%{opacity:0}}

/* tag + date (violet/magenta, same rhythm) */
.tag{color:var(--ntx);text-shadow:0 0 6px rgba(126,231,255,.9),0 0 14px rgba(126,231,255,.7)}
.date{
  color:#e07aff; /* base text tint */
  animation:pulseDate 3.8s ease-in-out infinite;
}

/* --- Animations --- */
@keyframes pulseUSB{
  0%,100%{filter:brightness(1) drop-shadow(0 0 6px rgba(255,255,255,.35))}
  40%{filter:brightness(1.9) drop-shadow(0 0 20px rgba(255,255,255,.95)) drop-shadow(0 0 36px rgba(178,102,255,.85))}
  60%{filter:brightness(1.5) drop-shadow(0 0 14px rgba(178,102,255,.65))}
}
/* strong white→violet log glow */
@keyframes pulseText{
  0%,100%{
    text-shadow:
      0 0 4px rgba(255,255,255,.45),
      0 0 8px rgba(255,255,255,.28),
      0 0 12px rgba(178,102,255,.25);
  }
  35%,65%{
    text-shadow:
      0 0 10px rgba(255,255,255,1),
      0 0 22px rgba(178,102,255,.98),
      0 0 34px rgba(255,102,204,.95),
      0 0 46px rgba(178,102,255,.88);
  }
}
/* same rhythm, but more magenta/violent and brighter */
@keyframes pulseDate{
  0%,100%{
    text-shadow:
      0 0 8px rgba(224,122,255,.65),
      0 0 18px rgba(178,102,255,.5),
      0 0 26px rgba(255,153,255,.45);
  }
  35%,65%{
    text-shadow:
      0 0 12px rgba(224,122,255,1),
      0 0 28px rgba(178,102,255,1),
      0 0 44px rgba(255,153,255,.98),
      0 0 64px rgba(224,122,255,.9);
  }
}

/* --- Layout for log & id lines (wrapping-safe) --- */
.logline,.idline{position:relative;max-width:64ch;min-height:1.6em}
.logline .prefix,.idline .prefix{position:absolute;left:0;top:0;white-space:pre;}
.logline .content{
  display:inline;white-space:pre-wrap;overflow-wrap:break-word;
  margin-left:var(--logw);vertical-align:top;
  will-change:text-shadow;animation:pulseText 3.8s ease-in-out infinite;
}
.idline .content{
  display:inline;white-space:pre-wrap;overflow-wrap:break-word;
  margin-left:var(--idw);vertical-align:top;
}
.logline .cur,.idline .cur{display:inline}

/* USB — align left with text (no X shift), same breathing */
.usb{
  position:relative;width:min(75vw,520px);aspect-ratio:16/9;
  opacity:0;transition:opacity 2.5s ease-in;
  /* REMOVE translateX so its left edge aligns with text */
  transform:translateY(-8%);
  margin-top:-14px;
  justify-self:start;
  animation:pulseUSB 3.8s ease-in-out infinite paused;
}
.usb.visible{opacity:0.9;animation-play-state:running;}
.usb img{width:100%;height:100%;object-fit:contain;display:block}

@media (prefers-reduced-motion:reduce){
  .blink,.date,.logline .content,.usb{animation:none!important;text-shadow:none!important}
}
</style>
</head>

<body>
<div class="wrap">
  <pre id="out"></pre>
  <div id="usb" class="usb"><img src="usb.png" alt="recovered usb"></div>
</div>

<script>
/* ---------- CONTENT POOLS ---------- */
const ENDING = "#next_transmission : march 2026";

const LOGS = [
  "sub-bass residue detected",
  "faint harmonic pulse detected",
  "residual loop fragment detected",
  "rhythmic ghost pattern detected",
  "low-frequency hum detected",
  "sub-harmonic trace detected",
  "quiet loop fragment detected",
  "unfinished sequence detected",
  "harmonic pulse detected — energy rising"
];

const IDS = [
  "human // made",
  "human // raw",
  "human // organic",
  "human // analog",
  "human // magnetic",
  "human // imperfect",
  "human // authentic",
  "human // feeling"
];

const STATUS = [
  "> status : Δ-lost sp//ark",
  "> status : Δ-wavecatcher",
  "> status : Δ-decoder"
];

/* ---------- TIMING / PACE ---------- */
const SPEED_BASE=30, SPEED_END=40, JITTER=5, STUTTER_PROB=0.1, STUTTER_MAX=120;
const SEARCH_PAUSE=1200, BREATH=200;

const out=document.getElementById("out"), usb=document.getElementById("usb");
const rnd=(a,b)=>Math.random()*(b-a)+a, wait=ms=>new Promise(r=>setTimeout(r,ms));

/* ---------- measure prefix widths for exact wrap ---------- */
function measure(text){
  const probe=document.createElement("span");
  probe.textContent=text;
  probe.style.position="absolute";probe.style.visibility="hidden";probe.style.whiteSpace="pre";
  probe.style.fontFamily=getComputedStyle(out).fontFamily;
  probe.style.fontSize=getComputedStyle(out).fontSize;
  document.body.appendChild(probe);
  const w=probe.getBoundingClientRect().width;
  document.body.removeChild(probe);
  return w;
}

/* ---------- TYPE HELPERS ---------- */
async function typeSimpleLine(text, speed=SPEED_BASE){
  const line=document.createElement("div");
  const span=document.createElement("span");
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";
  line.appendChild(span); line.appendChild(cur); out.appendChild(line);
  for(let i=0;i<text.length;i++){
    span.innerHTML=text.slice(0,i+1)
      .replace(/^\s*#next_transmission\s*:/i,'<span class="tag">#next_transmission</span> :')
      .replace(/march 2026/gi,'<span class="date">march 2026</span>');
    await wait(Math.floor(rnd(speed-JITTER,speed+JITTER)));
  }
  await wait(BREATH);
}

async function typePrefixed(contentText, kind){ // kind = "log" | "id"
  const row=document.createElement("div");
  row.className = kind==="log" ? "logline" : "idline";
  const prefix=document.createElement("span"); prefix.className="prefix";
  const content=document.createElement("span"); content.className="content";
  const cur=document.createElement("span"); cur.className="cur cursor blink"; cur.textContent="▮";

  // Hard-coded prefixes so the colon is guaranteed
  const pText = (kind==="log") ? "> log : " : "> id  : ";
  prefix.textContent = pText;

  // set left margin by measuring once (prevents missing colons / mis-wraps)
  const w = measure(pText);
  document.documentElement.style.setProperty(kind==="log"?"--logw":"--idw", w+"px");

  row.appendChild(prefix); row.appendChild(content); row.appendChild(cur); out.appendChild(row);

  // typing loop (+ mid pause on log)
  const t = contentText;
  const halfway=Math.floor(t.length/2); let paused=false;
  for(let i=0;i<t.length;i++){
    content.textContent=t.slice(0,i+1);
    let d=Math.floor(rnd(SPEED_BASE-JITTER,SPEED_BASE+JITTER));
    if(kind==="log"){
      if(Math.random()<STUTTER_PROB) d+=Math.floor(rnd(30,STUTTER_MAX));
      const ch=t[i]; if(ch===','||ch==='—') d+=Math.floor(rnd(80,180));
      if(!paused && i>=halfway){ d+=900; paused=true; }
    }
    await wait(d);
  }
  await wait(BREATH);
  if(kind==="log") lastLogContent = content;
}

let lastLogContent=null;

/* ---------- RUN ---------- */
(async function run(){
  // sequence
  await typeSimpleLine("> searching static…");
  await wait(SEARCH_PAUSE);

  const log = LOGS[Math.floor(Math.random()*LOGS.length)];
  const id  = IDS[Math.floor(Math.random()*IDS.length)];
  const status = STATUS[Math.floor(Math.random()*STATUS.length)];

  await typePrefixed(log, "log");
  await typePrefixed(id, "id");
  await typeSimpleLine(status);
  await typeSimpleLine(ENDING, SPEED_END); // slower for suspense

  // USB fade & sync
  setTimeout(()=>{
    usb.classList.add("visible");
    if(lastLogContent){
      lastLogContent.style.animation="none";
      void lastLogContent.offsetWidth;
      lastLogContent.style.animation="pulseText 3.8s ease-in-out infinite";
    }
  },500);
})();
</script>
</body>
</html>
