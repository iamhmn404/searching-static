<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>I AM HUMAN — Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000; --fg:#fff;
  --alert:#ff2f4d;
  --neon:#7EE7FF;
  --emberA:#ffb866;
  --emberB:#ff6a00;
}

html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:"Share Tech Mono","Courier New",monospace;
  display:flex; align-items:center; justify-content:center;
  padding:24px; overflow:hidden;
}

.wrap{ width:min(92vw,780px); display:grid; gap:28px; place-items:center; }
pre{ margin:0; max-width:64ch; white-space:pre-wrap; font-size:clamp(14px,2.6vw,19px); line-height:1.6; }

.cursor{display:inline-block; width:.65ch;}
.blink{animation:blink .55s step-end infinite}
@keyframes blink{50%{opacity:0}}

.tag-ntx{
  color:var(--neon);
  text-shadow:
    0 0 3px rgba(126,231,255,.95),
    0 0 6px rgba(126,231,255,.75),
    0 0 12px rgba(126,231,255,.55),
    0 0 20px rgba(126,231,255,.35);
}
.blink-2026{
  color:#fff;
  text-shadow:0 0 3px var(--alert),0 0 6px var(--alert),0 0 12px var(--alert);
  animation:twinkle .9s step-end infinite;
}
@keyframes twinkle{50%{opacity:0}}

.spacer{height:1.2em}

/* Ghostly pulse glow */
.pulse-ghost{ animation:pulseGhost 3.2s ease-out 1 }
@keyframes pulseGhost{
  0%{ text-shadow:none; opacity:1 }
  30%{ text-shadow:0 0 8px rgba(255,255,255,.85), 0 0 18px rgba(255,255,255,.55); }
  100%{ text-shadow:none; opacity:1 }
}

/* USB + ember glow */
.usb{width:min(75vw,520px); aspect-ratio:16/9; filter:contrast(125%) brightness(102%); position:relative}
.usb video,.usb img{width:100%; height:100%; object-fit:contain; display:block}

.usb.embers::before,
.usb.embers::after{
  content:""; position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen; border-radius:6px;
}
.usb.embers::before{
  box-shadow:
    0 0 14px rgba(255,184,102,.50),
    0 0 28px rgba(255,106,0,.35),
    0 0 44px rgba(255,106,0,.25);
  animation:emberPulse 3.6s ease-in-out infinite;
}
.usb.embers::after{
  box-shadow:
    0 0 6px rgba(255,255,255,.35),
    0 0 12px rgba(255,255,255,.25);
  opacity:.6; animation:emberFlicker 1.8s steps(6,end) infinite;
}
@keyframes emberPulse{
  0%,100%{opacity:.55; transform:none}
  50%{opacity:.9; transform:translateX(.6px)}
}
@keyframes emberFlicker{
  0%{opacity:.35} 50%{opacity:.75} 100%{opacity:.35}
}

@media (prefers-reduced-motion:reduce){
  .blink,.blink-2026,.pulse-ghost,.usb.embers::before,.usb.embers::after{animation:none!important; text-shadow:none!important}
}
</style>
</head>
<body>
  <div class="wrap">
    <pre id="out"></pre>
    <div id="mediaMount"></div>
  </div>

<script>
const SPEED = 10; // faster typing (ms per char)
const LINES = [
  "> searching static…",
  "",
  "a pulse hums faintly beneath the noise",
  "",
  "> status : \\u0394- LOST SP//ARK_01",
  "> signal : sub-bass residue",
  "> bpm : unknown",
  "next transmission : march 2026"
].map(s=>s.replace("\\u0394","Δ"));

const out = document.getElementById("out");
const mount = document.getElementById("mediaMount");

function addSpacer(){ const d=document.createElement('div'); d.className='spacer'; out.appendChild(d); }

function typeLine(text,{speed=SPEED,pauseAfter=0,showCursor=false,ghostGlow=false}={}){
  return new Promise(res=>{
    const line=document.createElement("div");
    const span=document.createElement("span");
    line.appendChild(span);
    let cursor=null;
    if(showCursor){ cursor=document.createElement("span"); cursor.className="cursor blink"; cursor.textContent="▮"; line.appendChild(cursor); }
    out.appendChild(line);

    let i=0;
    (function tick(){
      const partial = text.slice(0,++i)
        .replace(/^\s*next transmission\s*:/i,'<span class="tag-ntx">#next_transmission</span> : ')
        .replace(/march 2026/gi,'<span class="blink-2026">march 2026</span>');
      span.innerHTML = partial;
      if(i<text.length){ setTimeout(tick,speed); }
      else{
        if(ghostGlow){ span.classList.add('pulse-ghost'); }
        setTimeout(res,pauseAfter);
      }
    })();
  });
}

(async function run(){
  await typeLine(LINES[0], {showCursor:true, pauseAfter:2000});  // reduced to 2s
  addSpacer();
  await typeLine(LINES[2], {ghostGlow:true, pauseAfter:300});
  addSpacer();
  await typeLine(LINES[4], {showCursor:true, pauseAfter:80});
  await typeLine(LINES[5], {showCursor:true, pauseAfter:80});
  await typeLine(LINES[6], {showCursor:true, pauseAfter:200});

  const final = document.createElement("div");
  out.appendChild(final);
  final.innerHTML = LINES[7]
    .replace(/^\s*next transmission\s*:/i,'<span class="tag-ntx">#next_transmission</span> : ')
    .replace(/march 2026/gi,'<span class="blink-2026">march 2026</span>');

  const usbDiv = document.createElement('div');
  usbDiv.className = 'usb';
  const vid = document.createElement('video');
  vid.id = 'usbvid'; vid.src = 'usb.mp4';
  vid.muted = true; vid.playsInline = true; vid.autoplay = true;
  usbDiv.appendChild(vid); mount.appendChild(usbDiv);

  let plays = 0;
  vid.addEventListener('ended', () => {
    plays++;
    if(plays < 2){
      try{ vid.currentTime = 0; vid.play(); }catch(e){}
    }else{
      const img = new Image();
      img.src = 'usb.png';
      img.alt = 'recovered usb (still)';
      img.onload = () => { usbDiv.replaceChildren(img); usbDiv.classList.add('embers'); };
      setTimeout(()=>{ if(usbDiv.firstChild !== img){ usbDiv.replaceChildren(img); usbDiv.classList.add('embers'); } }, 800);
    }
  });
})();
</script>
</body>
</html>
