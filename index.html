<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>I AM HUMAN — Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#000; --fg:#fff; --ntx:#7EE7FF;
  --logw:0px; --idw:0px;
  /* >>> alignment controls <<< */
  --text-offset: 5vw;   /* move TEXT only (right = larger, left = smaller) */
  --usb-offset:  0px;   /* move USB only (right = positive, left = negative) */
}

html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--fg);
  font-family:"Share Tech Mono","Courier New",monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;padding:24px;
}

/* Layout: text + usb are independent children you can offset separately */
.wrap{
  width:min(88vw,760px);
  display:grid;
  grid-template-rows:auto auto;
  gap:28px;
  justify-items:start;
  align-items:start;
  text-align:left;
}

/* TEXT block (pre) — offset ONLY this to align under USB edge */
#out{
  margin-left: var(--text-offset);
  max-width:64ch;
  font-size:clamp(14px,2.6vw,19px);
  line-height:1.6;
}

.cursor{display:inline-block;width:.65ch}
.blink{animation:blink .55s step-end infinite}
@keyframes blink{50%{opacity:0}}

/* tag + date (violet/magenta, same rhythm as log/USB) */
.tag{color:var(--ntx);text-shadow:0 0 6px rgba(126,231,255,.9),0 0 14px rgba(126,231,255,.7)}
.date{
  color:#e07aff; /* base tint */
  animation:pulseDate 3.8s ease-in-out infinite;
}

/* --- Animations --- */
@keyframes pulseUSB{
  0%,100%{filter:brightness(1) drop-shadow(0 0 6px rgba(255,255,255,.35))}
  40%{filter:brightness(1.9) drop-shadow(0 0 20px rgba(255,255,255,.95)) drop-shadow(0 0 36px rgba(178,102,255,.85))}
  60%{filter:brightness(1.5) drop-shadow(0 0 14px rgba(178,102,255,.65))}
}
/* COLOR-DOMINANT violet/magenta glow (mobile-strong) */
.line.log .content{
  color:#e9ddff;                 /* slight lilac base so white doesn't dominate */
  will-change:text-shadow,filter;
  animation:pulseText 3.6s ease-in-out infinite;
  filter:brightness(1.05);       /* tiny lift without washing out color */
}

@keyframes pulseText{
  /* idle: colored aura leads, white minimal */
  0%,100%{
    text-shadow:
      0 0 6px  rgba(178,102,255,0.85),   /* violet core */
      0 0 16px rgba(255,102,204,0.75),   /* magenta mid */
      0 0 28px rgba(224,122,255,0.65),   /* pink-violet bloom */
      0 0 44px rgba(178,102,255,0.55);   /* outer haze */
  }
  /* peak: boost color layers; keep white tight + lower alpha */
  42%,58%{
    text-shadow:
      0 0 8px  rgba(255,255,255,0.85),   /* small white accent, not dominant */
      0 0 22px rgba(178,102,255,1.00),   /* strong violet */
      0 0 42px rgba(255,102,204,0.98),   /* strong magenta */
      0 0 72px rgba(224,122,255,0.95),   /* pink-violet halo */
      0 0 120px rgba(178,102,255,0.90);  /* big colored bloom */
    filter:brightness(1.20) contrast(1.05);
  }
}
/* high-contrast neon pulse for date */
@keyframes pulseDate {
  0%,100% {
    text-shadow:
      0 0 6px  rgba(255,255,255,0.25),
      0 0 10px rgba(255,255,255,0.15),
      0 0 18px rgba(224,122,255,0.10),
      0 0 28px rgba(178,102,255,0.08);
  }
  40%,60% {
    text-shadow:
      0 0 10px  rgba(255,255,255,1),
      0 0 22px  rgba(255,255,255,1),
      0 0 42px  rgba(224,122,255,0.85),
      0 0 64px  rgba(178,102,255,0.75),
      0 0 90px  rgba(255,255,255,0.5);
  }
}

/* Log & ID rows with guaranteed colons and wrapping */
.line{position:relative;max-width:64ch;min-height:1.6em}
.line .prefix{position:absolute;left:0;top:0;white-space:pre;}
.line .content{
  display:inline;white-space:pre-wrap;overflow-wrap:break-word;
  margin-left:var(--ml);vertical-align:top;
}
.line.log .content{
  will-change:text-shadow;animation:pulseText 3.8s ease-in-out infinite;
}

/* USB — align independently of text using --usb-offset */
.usb{
  position:relative;width:min(75vw,520px);aspect-ratio:16/9;
  opacity:0;transition:opacity 2.5s ease-in;
  transform:translateY(-8%);
  margin-top:-14px;
  margin-left: var(--usb-offset);     /* <- move stick left/right independently */
  justify-self:start;
  animation:pulseUSB 3.8s ease-in-out infinite paused;
}
.usb.visible{opacity:0.9;animation-play-state:running;}
.usb img{width:100%;height:100%;object-fit:contain;display:block}

@media (prefers-reduced-motion:reduce){
  .blink,.date,.line.log .content,.usb{animation:none!important;text-shadow:none!important}
}
</style>
</head>

<body>
<div class="wrap">
  <pre id="out"></pre>
  <div id="usb" class="usb"><img src="usb.png" alt="recovered usb"></div>
</div>

<script>
/* ---------- CONTENT POOLS ---------- */
const ENDING = "#next_transmission : march 2026";

const LOGS = [
  "sub-bass residue detected",
  "faint harmonic pulse detected",
  "residual loop fragment detected",
  "rhythmic ghost pattern noted",
  "low-frequency hum detected",
  "sub-harmonic trace detected",
  "quiet loop fragment detected",
  "unfinished sequence detected",
  "rhythmic energy rising"
];

const IDS = [
  "human // made",
  "human // raw",
  "human // organic",
  "human // analog",
  "human // magnetic",
  "human // imperfect",
  "human // authentic",
  "human // feeling"
];

const STATUS = [
  "> status : Δ-lost sp//ark",
  "> status : Δ-wavecatcher",
  "> status : Δ-decoder"
];

/* ---------- TIMING / PACE ---------- */
const SPEED_BASE=30, SPEED_END=40, JITTER=5, STUTTER_PROB=0.1, STUTTER_MAX=120;
const SEARCH_PAUSE=1200, BREATH=200;

const out=document.getElementById("out"), usb=document.getElementById("usb");
const rnd=(a,b)=>Math.random()*(b-a)+a, wait=ms=>new Promise(r=>setTimeout(r,ms));

/* measure a text prefix to compute margin-left */
function measurePrefix(prefixText){
  const probe=document.createElement("span");
  probe.textContent=prefixText;
  probe.style.position="absolute";probe.style.visibility="hidden";probe.style.whiteSpace="pre";
  probe.style.fontFamily=getComputedStyle(out).fontFamily;
  probe.style.fontSize=getComputedStyle(out).fontSize;
  document.body.appendChild(probe);
  const w=probe.getBoundingClientRect().width;
  document.body.removeChild(probe);
  return w;
}

/* create a line with fixed prefix + typing content */
async function typeFixedLine(prefixText, contentText, {pulse=false}={}){
  const row=document.createElement("div"); row.className="line"+(pulse?" log":"");
  const prefix=document.createElement("span"); prefix.className="prefix"; prefix.textContent=prefixText;
  const content=document.createElement("span"); content.className="content";
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";

  /* set content margin-left based on measured prefix width */
  const ml = measurePrefix(prefixText);
  content.style.setProperty("--ml", ml+"px");

  row.appendChild(prefix); row.appendChild(content); row.appendChild(cur);
  out.appendChild(row);

  const t = contentText;
  const halfway=Math.floor(t.length/2); let paused=false;
  for(let i=0;i<t.length;i++){
    content.textContent=t.slice(0,i+1);
    let d=Math.floor(rnd(SPEED_BASE-JITTER,SPEED_BASE+JITTER));
    if(pulse){ /* stutter + mid pause only on log line */
      if(Math.random()<STUTTER_PROB) d+=Math.floor(rnd(30,STUTTER_MAX));
      const ch=t[i]; if(ch===','||ch==='—') d+=Math.floor(rnd(80,180));
      if(!paused && i>=halfway){ d+=900; paused=true; }
    }
    await wait(d);
  }
  await wait(BREATH);
}

async function typeSimple(text, speed=SPEED_BASE){
  const line=document.createElement("div");
  const span=document.createElement("span");
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";
  line.appendChild(span); line.appendChild(cur); out.appendChild(line);
  for(let i=0;i<text.length;i++){
    span.innerHTML=text.slice(0,i+1)
      .replace(/^\s*#next_transmission\s*:/i,'<span class="tag">#next_transmission</span> :')
      .replace(/march 2026/gi,'<span class="date">march 2026</span>');
    await wait(Math.floor(rnd(speed-JITTER,speed+JITTER)));
  }
  await wait(BREATH);
}

/* ---------- RUN ---------- */
(async function run(){
  await typeSimple("> searching static…");
  await wait(SEARCH_PAUSE);

  const log = LOGS[Math.floor(Math.random()*LOGS.length)];
  const id  = IDS[Math.floor(Math.random()*IDS.length)];
  const status = STATUS[Math.floor(Math.random()*STATUS.length)];

  await typeFixedLine("> log : ", log,   {pulse:true});
  await typeFixedLine("> id  : ", id,    {pulse:false});
  await typeSimple(status);
  await typeSimple(ENDING, SPEED_END);

  setTimeout(()=>{ usb.classList.add("visible"); }, 500);
})();
</script>
</body>
</html>
