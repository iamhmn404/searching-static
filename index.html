<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>I AM HUMAN — Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000; --fg:#fff; --alert:#ff2f4d; --ntx:#7EE7FF;
  --log-prefix: 8ch; /* will be overridden in px at runtime for perfect wrap */
}

html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--fg);
  font-family:"Share Tech Mono","Courier New",monospace;
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;padding:24px;
}
.wrap{position:relative;width:min(92vw,780px);display:grid;gap:28px;justify-items:start;align-items:start}

pre{margin:0;max-width:64ch;white-space:pre-wrap;font-size:clamp(14px,2.6vw,19px);line-height:1.6}

.cursor{display:inline-block;width:.65ch}
.blink{animation:blink .55s step-end infinite}
@keyframes blink{50%{opacity:0}}

.tag{color:var(--ntx);text-shadow:0 0 4px rgba(126,231,255,.9),0 0 10px rgba(126,231,255,.7)}
.date{color:#fff;text-shadow:0 0 4px var(--alert),0 0 10px var(--alert);animation:twinkle .9s step-end infinite}
@keyframes twinkle{50%{opacity:0}}

/* brighter ghost flare on log */
.log-flare{animation:logFlare 1.2s ease-out 1}
.log-echo{animation:logEcho 1.0s ease-out 1}
@keyframes logFlare{
  0%{text-shadow:none}
  24%{text-shadow:0 0 14px rgba(255,255,255,1),0 0 28px rgba(255,255,255,1),0 0 46px rgba(210,180,255,.7)}
  100%{text-shadow:none}
}
@keyframes logEcho{
  0%{text-shadow:none}
  35%{text-shadow:0 0 10px rgba(255,255,255,.9),0 0 24px rgba(210,180,255,.6)}
  100%{text-shadow:none}
}

/* Hanging indent driven by runtime-measured prefix width */
.hang-log{
  padding-left: var(--log-prefix);
  text-indent: calc(var(--log-prefix) * -1);
}

/* USB: left-nudged, 3s fade, ember flicker */
.usb{
  position:relative;width:min(75vw,520px);aspect-ratio:16/9;
  opacity:0;transition:opacity 3s ease-in;
  transform:translateX(-3%) translateY(-8%);
  margin-top:-14px;
}
.usb.visible{opacity:0.88}
.usb img{
  width:100%;height:100%;object-fit:contain;display:block;filter:
    drop-shadow(0 0 10px rgba(255,255,255,.85))
    drop-shadow(0 0 20px rgba(255,255,255,.7))
    drop-shadow(0 0 34px rgba(210,180,255,.5))
    drop-shadow(0 0 52px rgba(210,180,255,.35));
}
.usb.flicker{opacity:.85}
.usb.flicker img{animation:emberBreath 3.8s ease-in-out infinite}
@keyframes emberBreath{
  0%,100%{filter:
    drop-shadow(0 0 6px rgba(255,255,255,.6))
    drop-shadow(0 0 14px rgba(255,255,255,.5))
    drop-shadow(0 0 24px rgba(210,180,255,.4))
    drop-shadow(0 0 40px rgba(210,180,255,.28))}
  50%{filter:
    drop-shadow(0 0 12px rgba(255,255,255,.95))
    drop-shadow(0 0 22px rgba(255,255,255,.8))
    drop-shadow(0 0 36px rgba(210,180,255,.6))
    drop-shadow(0 0 54px rgba(210,180,255,.45))}
}

@media (prefers-reduced-motion:reduce){
  .blink,.date,.log-flare,.log-echo,.usb img{animation:none!important;text-shadow:none!important}
}
</style>
</head>
<body>
<div class="wrap">
  <pre id="out"></pre>
  <div id="usb" class="usb"><img src="usb.png" alt="recovered usb"></div>
</div>

<script>
const ENDINGS=["#next_transmission : march 2026","#estimated_intercept : march 2026"];
const VARIANTS=[
  ["> searching static…","> log : low-frequency hum detected — awaiting resonance, awaiting contact.","> status : Δ-LOST SP//ARK","> signal : sub-bass residue","> bpm : 122"],
  ["> searching static…","> log : residual loop fragments detected — unfinished, magnetic, raw.","> status : Δ-LOST SP//ARK","> signal : sub-bass residue","> bpm : 122"],
  ["> searching static…","> log : residual loop fragment detected — something quiet, something human.","> status : Δ-WAVECATCHER","> signal : sub-harmonic trace","> bpm : 122"],
  ["> searching static…","> log : faint harmonic pulse detected — energy rising.","> status : Δ-LOST SP//ARK","> signal : rhythmic ghost pattern","> bpm : 122"]
];

const SPEED_BASE=16,JITTER=6,STUTTER_PROB=0.12,STUTTER_MAX=160,SEARCH_PAUSE=1400;
const out=document.getElementById("out"), usb=document.getElementById("usb");
const rnd=(a,b)=>Math.random()*(b-a)+a, wait=ms=>new Promise(r=>setTimeout(r,ms));

/* measure the exact width of '> log : ' in px and set --log-prefix */
function setLogPrefixWidth(){
  const m=document.createElement("span");
  m.textContent="> log : ";
  m.style.position="absolute";
  m.style.visibility="hidden";
  m.style.whiteSpace="pre";
  m.style.fontFamily=getComputedStyle(out).fontFamily;
  m.style.fontSize=getComputedStyle(out).fontSize;
  document.body.appendChild(m);
  const w=m.offsetWidth;
  document.body.removeChild(m);
  document.documentElement.style.setProperty("--log-prefix", w+"px");
}

async function typeSimpleLine(text){
  const line=document.createElement("div");
  const span=document.createElement("span");
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";
  line.appendChild(span); line.appendChild(cur); out.appendChild(line);

  for(let i=0;i<text.length;i++){
    span.innerHTML=text.slice(0,i+1)
      .replace(/^\s*#next_transmission\s*:/i,'<span class="tag">#next_transmission</span> :')
      .replace(/^\s*#estimated_intercept\s*:/i,'<span class="tag">#estimated_intercept</span> :')
      .replace(/march 2026/gi,'<span class="date">march 2026</span>');
    const d=Math.floor(rnd(SPEED_BASE-JITTER,SPEED_BASE+JITTER));
    await wait(d);
  }
}

async function typeLogLine(fullText){
  const line=document.createElement("div");
  line.className="hang-log";
  const span=document.createElement("span");
  const cur=document.createElement("span"); cur.className="cursor blink"; cur.textContent="▮";
  line.appendChild(span); line.appendChild(cur); out.appendChild(line);

  const t = fullText.replace(/^>\s*log\s*:\s*/i,"> log : "); // ensure same visible prefix
  const halfway=Math.floor(t.length/2); let half=false;

  for(let i=0;i<t.length;i++){
    span.textContent=t.slice(0,i+1);
    let d=Math.floor(rnd(SPEED_BASE-JITTER,SPEED_BASE+JITTER));
    if(Math.random()<STUTTER_PROB) d+=Math.floor(rnd(30,STUTTER_MAX));
    const ch=t[i];
    if(ch===','||ch==='—') d+=Math.floor(rnd(80,180));
    if(!half && i>=halfway){ d+=1000; half=true; } // 1s “thinking” pause
    await wait(d);
  }
  span.classList.add('log-flare');
  setTimeout(()=>span.classList.add('log-echo'),900);
}

(async function run(){
  setLogPrefixWidth(); // compute perfect wrap for this device

  const v=VARIANTS[Math.floor(Math.random()*VARIANTS.length)].slice();
  v.push(Math.random()<0.7?ENDINGS[0]:ENDINGS[1]);

  await typeSimpleLine(v[0]); await wait(SEARCH_PAUSE);
  await typeLogLine(v[1]);
  await typeSimpleLine(v[2]); await typeSimpleLine(v[3]); await typeSimpleLine(v[4]);

  const final=document.createElement("div"); out.appendChild(final);
  final.innerHTML=v[5]
    .replace(/^\s*#next_transmission\s*:/i,'<span class="tag">#next_transmission</span> : ')
    .replace(/^\s*#estimated_intercept\s*:/i,'<span class="tag">#estimated_intercept</span> : ')
    .replace(/march 2026/gi,'<span class="date">march 2026</span>');

  /* start USB fade 0.5s after final line, fade over 3s, then flicker */
  setTimeout(()=>{ usb.classList.add("visible"); }, 500);
  setTimeout(()=>{ usb.classList.add("flicker"); }, 4000);

  (function bursts(){
    const delay=rnd(400,1200);
    setTimeout(()=>{
      const hits=2+Math.floor(Math.random()*3);
      for(let i=0;i<hits;i++){
        setTimeout(()=>{
          usb.style.opacity=".95";
          setTimeout(()=>{usb.style.opacity="1"},90+Math.random()*90);
        }, i*80 + Math.random()*60);
      }
      bursts();
    },delay);
  })();
})();
</script>
</body>
</html>


